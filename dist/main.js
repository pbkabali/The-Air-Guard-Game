(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var i=s.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();class t extends Phaser.GameObjects.Sprite{constructor(e,t,s,i,a){super(e,t,s,i),this.scene=e,this.scene.add.existing(this),this.scene.physics.world.enableBody(this,0),this.setData("type",a),this.setData("isDead",!1)}explode(e){this.getData("isDead")||(this.setTexture("sprExplosion"),this.play("sprExplosion"),this.scene.sfx.explosions[Phaser.Math.Between(0,this.scene.sfx.explosions.length-1)].play(),void 0!==this.shootTimer&&this.shootTimer&&this.shootTimer.remove(!1),this.setAngle(0),this.body.setVelocity(0,0),this.on("animationcomplete",(function(){e?this.destroy():this.setVisible(!1)}),this),this.setData("isDead",!0))}}class s extends t{constructor(e,t,s){super(e,t,s,"sprLaserPlayer"),this.body.velocity.y=-200}}class i extends t{constructor(e,t,s){super(e,t,s,"sprLaserEnemy0"),this.body.velocity.y=200}}class a extends t{constructor(e,t,s){super(e,t,s,"sprEnemy1","ChaserShip"),this.body.velocity.y=Phaser.Math.Between(50,100),this.states={MOVE_DOWN:"MOVE_DOWN",CHASE:"CHASE"},this.state=this.states.MOVE_DOWN}update(){if(!this.getData("isDead")&&this.scene.player&&(Phaser.Math.Distance.Between(this.x,this.y,this.scene.player.x,this.scene.player.y)<320&&(this.state=this.states.CHASE),this.state==this.states.CHASE)){var e=this.scene.player.x-this.x,t=this.scene.player.y-this.y,s=Math.atan2(t,e);this.body.setVelocity(100*Math.cos(s),100*Math.sin(s))}}}class h extends t{constructor(e,t,s){super(e,t,s,"sprEnemy0","GunShip"),this.body.velocity.y=Phaser.Math.Between(50,100),this.shootTimer=this.scene.time.addEvent({delay:1e3,callback:function(){var e=new i(this.scene,this.x,this.y);e.setScale(this.scaleX),this.scene.enemyLasers.add(e)},callbackScope:this,loop:!0}),this.play("sprEnemy0")}onDestroy(){void 0!==this.shootTimer&&this.shootTimer&&this.shootTimer.remove(!1)}}class r extends t{constructor(e,t,s){super(e,t,s,"sprEnemy2","CarrierShip"),this.body.velocity.y=Phaser.Math.Between(50,100),this.play("sprEnemy2")}}class n{constructor(e,t,s){this.scene=e,this.key=t,this.velocityY=s,this.layers=this.scene.add.group(),this.createLayers()}createLayers(){for(var e=0;e<2;e++){var t=this.scene.add.sprite(0,0,this.key);t.y=t.displayHeight*e;var s=Phaser.Math.Between(0,10)>=5?-1:1,i=Phaser.Math.Between(0,10)>=5?-1:1;t.setScale(2*s,2*i),t.setDepth(-5-(e-1)),this.scene.physics.world.enableBody(t,0),t.body.velocity.y=this.velocityY,this.layers.add(t)}}update(){if(this.layers.getChildren()[0].y>0)for(var e=0;e<this.layers.getChildren().length;e++){var t=this.layers.getChildren()[e];t.y=-t.displayHeight+t.displayHeight*e}}}const o=class extends t{constructor(e,t,s,i){super(e,t,s,i,"Player"),this.setData("speed",200),this.play("sprPlayer"),this.setData("isShooting",!1),this.setData("timerShootDelay",10),this.setData("timerShootTick",this.getData("timerShootDelay")-1)}moveUp(){this.body.velocity.y=-this.getData("speed")}moveDown(){this.body.velocity.y=this.getData("speed")}moveLeft(){this.body.velocity.x=-this.getData("speed")}moveRight(){this.body.velocity.x=this.getData("speed")}update(){if(this.body.setVelocity(0,0),this.x=Phaser.Math.Clamp(this.x,0,this.scene.game.config.width),this.y=Phaser.Math.Clamp(this.y,0,this.scene.game.config.height),this.getData("isShooting"))if(this.getData("timerShootTick")<this.getData("timerShootDelay"))this.setData("timerShootTick",this.getData("timerShootTick")+1);else{var e=new s(this.scene,this.x,this.y);this.scene.playerLasers.add(e),this.scene.sfx.laser.play(),this.setData("timerShootTick",0)}}onDestroy(){this.scene.time.addEvent({delay:1e3,callback:function(){this.scene.scene.start("SceneGameOver")},callbackScope:this,loop:!1})}},d=e.p+"eafa1b73464ce20410d55ea9f8aa235b.png",p=e.p+"c8b59274b06978c46a61e5711d20829f.png",c=e.p+"0cdc1fd07f30652c32547f97d4ac502b.png",l=e.p+"8a2c1adebbb2aa5c27540971e524c7dd.png",y=e.p+"9b077ee87362d88a7f3f161d6eaaef68.png",g=e.p+"9da515e4e6ed979a47e748af807fc7b6.png",f=e.p+"23034e5308c25ad774f6308d862fcac3.png",m=e.p+"40e1c635e7eab938c03b219ac133f846.png",u=e.p+"3c1d5d777a8654a6b17c529a0d9309c6.wav",b=e.p+"98c7cccfed9e1d6d6da346b80602ddb2.wav";class v extends Phaser.Scene{constructor(){super({key:"SceneMainMenu"})}preload(){this.load.image("sprBg0",d),this.load.image("sprBg1",p),this.load.image("sprBtnPlay",c),this.load.image("sprBtnPlayHover",l),this.load.image("sprBtnPlayDown",y),this.load.image("sprBtnRestart",g),this.load.image("sprBtnRestartHover",f),this.load.image("sprBtnRestartDown",m),this.load.audio("sndBtnOver",u),this.load.audio("sndBtnDown",b)}create(){this.sfx={btnOver:this.sound.add("sndBtnOver"),btnDown:this.sound.add("sndBtnDown")},this.btnPlay=this.add.sprite(.5*this.game.config.width,.5*this.game.config.height,"sprBtnPlay"),this.btnPlay.setInteractive(),this.btnPlay.on("pointerover",(function(){this.btnPlay.setTexture("sprBtnPlayHover"),this.sfx.btnOver.play()}),this),this.btnPlay.on("pointerout",(function(){this.setTexture("sprBtnPlay")})),this.btnPlay.on("pointerdown",(function(){this.btnPlay.setTexture("sprBtnPlayDown"),this.sfx.btnDown.play()}),this),this.btnPlay.on("pointerup",(function(){this.btnPlay.setTexture("sprBtnPlay"),this.scene.start("SceneMain")}),this),this.title=this.add.text(.5*this.game.config.width,128,"SPACE SHOOTER",{fontFamily:"monospace",fontSize:48,fontStyle:"bold",color:"#ffffff",align:"center"}),this.title.setOrigin(.5),this.backgrounds=[];for(var e=0;e<5;e++){var t=["sprBg0","sprBg1"],s=t[Phaser.Math.Between(0,t.length-1)],i=new n(this,s,10*e);this.backgrounds.push(i)}}update(){for(var e=0;e<this.backgrounds.length;e++)this.backgrounds[e].update()}}const D=v,w=e.p+"043c56409310a194998085b5c18c34f4.png",x=e.p+"da7209c834e3deb4b0a7ace5a4f4bff3.png",P=e.p+"a28bf4d7ed33d8201b8f444fddabf535.png",S=e.p+"607bb8e12bba9baa5025420a9bea09a4.png",k=e.p+"c984181120c7f0b4471b3f4f3a9ce743.png",B=e.p+"0af7ec1814d20adaeb808fd29810c977.png",E=e.p+"c2ef30ce6e5f386f55cb204332fc2582.png",M=e.p+"59054d5f02805be881c6c8fd814e7bbd.wav",T=e.p+"bd193892f478770d941214338896c648.wav",C=e.p+"0fa9e1340470d9a5a1f519da7a1e18dd.wav";class R extends Phaser.Scene{constructor(){super({key:"SceneMain"})}preload(){this.load.spritesheet("sprExplosion",w,{frameWidth:32,frameHeight:32}),this.load.spritesheet("sprEnemy0",x,{frameWidth:16,frameHeight:16}),this.load.image("sprEnemy1",P),this.load.spritesheet("sprEnemy2",S,{frameWidth:16,frameHeight:16}),this.load.image("sprLaserEnemy0",k),this.load.image("sprLaserPlayer",B),this.load.spritesheet("sprPlayer",E,{frameWidth:16,frameHeight:16}),this.load.audio("sndExplode0",M),this.load.audio("sndExplode1",T),this.load.audio("sndLaser",C)}getEnemiesByType(e){for(var t=[],s=0;s<this.enemies.getChildren().length;s++){var i=this.enemies.getChildren()[s];i.getData("type")==e&&t.push(i)}return t}create(){this.anims.create({key:"sprEnemy0",frames:this.anims.generateFrameNumbers("sprEnemy0"),frameRate:20,repeat:-1}),this.anims.create({key:"sprEnemy2",frames:this.anims.generateFrameNumbers("sprEnemy2"),frameRate:20,repeat:-1}),this.anims.create({key:"sprExplosion",frames:this.anims.generateFrameNumbers("sprExplosion"),frameRate:20,repeat:0}),this.anims.create({key:"sprPlayer",frames:this.anims.generateFrameNumbers("sprPlayer"),frameRate:20,repeat:-1}),this.sfx={explosions:[this.sound.add("sndExplode0"),this.sound.add("sndExplode1")],laser:this.sound.add("sndLaser")},this.backgrounds=[];for(var e=0;e<5;e++){var t=new n(this,"sprBg0",10*e);this.backgrounds.push(t)}this.player=new o(this,.5*this.game.config.width,.5*this.game.config.height,"sprPlayer"),this.keyW=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),this.keyS=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),this.keyA=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),this.keyD=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),this.keySpace=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.enemies=this.add.group(),this.enemyLasers=this.add.group(),this.playerLasers=this.add.group(),this.time.addEvent({delay:1e3,callback:function(){var e=null;Phaser.Math.Between(0,10)>=3?e=new h(this,Phaser.Math.Between(0,this.game.config.width),0):Phaser.Math.Between(0,10)>=5?this.getEnemiesByType("ChaserShip").length<5&&(e=new a(this,Phaser.Math.Between(0,this.game.config.width),0)):e=new r(this,Phaser.Math.Between(0,this.game.config.width),0),null!==e&&(e.setScale(.1*Phaser.Math.Between(10,20)),this.enemies.add(e))},callbackScope:this,loop:!0}),this.physics.add.collider(this.playerLasers,this.enemies,(function(e,t){t&&(void 0!==t.onDestroy&&t.onDestroy(),t.explode(!0),e.destroy())})),this.physics.add.overlap(this.player,this.enemies,(function(e,t){e.getData("isDead")||t.getData("isDead")||(e.explode(!1),e.onDestroy(),t.explode(!0))})),this.physics.add.overlap(this.player,this.enemyLasers,(function(e,t){e.getData("isDead")||t.getData("isDead")||(e.explode(!1),e.onDestroy(),t.destroy())}))}update(){this.player.getData("isDead")||(this.player.update(),this.keyW.isDown?this.player.moveUp():this.keyS.isDown&&this.player.moveDown(),this.keyA.isDown?this.player.moveLeft():this.keyD.isDown&&this.player.moveRight(),this.keySpace.isDown?this.player.setData("isShooting",!0):(this.player.setData("timerShootTick",this.player.getData("timerShootDelay")-1),this.player.setData("isShooting",!1)));for(var e=0;e<this.enemies.getChildren().length;e++){var t=this.enemies.getChildren()[e];t.update(),(t.x<-t.displayWidth||t.x>this.game.config.width+t.displayWidth||t.y<4*-t.displayHeight||t.y>this.game.config.height+t.displayHeight)&&t&&(void 0!==t.onDestroy&&t.onDestroy(),t.destroy())}for(e=0;e<this.enemyLasers.getChildren().length;e++)(s=this.enemyLasers.getChildren()[e]).update(),(s.x<-s.displayWidth||s.x>this.game.config.width+s.displayWidth||s.y<4*-s.displayHeight||s.y>this.game.config.height+s.displayHeight)&&s&&s.destroy();for(e=0;e<this.playerLasers.getChildren().length;e++){var s;(s=this.playerLasers.getChildren()[e]).update(),(s.x<-s.displayWidth||s.x>this.game.config.width+s.displayWidth||s.y<4*-s.displayHeight||s.y>this.game.config.height+s.displayHeight)&&s&&s.destroy()}for(e=0;e<this.backgrounds.length;e++)this.backgrounds[e].update()}}const H=R;class O extends Phaser.Scene{constructor(){super({key:"SceneGameOver"})}create(){this.title=this.add.text(.5*this.game.config.width,128,"GAME OVER",{fontFamily:"monospace",fontSize:48,fontStyle:"bold",color:"#ffffff",align:"center"}),this.title.setOrigin(.5),this.sfx={btnOver:this.sound.add("sndBtnOver"),btnDown:this.sound.add("sndBtnDown")},this.btnRestart=this.add.sprite(.5*this.game.config.width,.5*this.game.config.height,"sprBtnRestart"),this.btnRestart.setInteractive(),this.btnRestart.on("pointerover",(function(){this.btnRestart.setTexture("sprBtnRestartHover"),this.sfx.btnOver.play()}),this),this.btnRestart.on("pointerout",(function(){this.setTexture("sprBtnRestart")})),this.btnRestart.on("pointerdown",(function(){this.btnRestart.setTexture("sprBtnRestartDown"),this.sfx.btnDown.play()}),this),this.btnRestart.on("pointerup",(function(){this.btnRestart.setTexture("sprBtnRestart"),this.scene.start("SceneMain")}),this),this.backgrounds=[];for(var e=0;e<5;e++){var t=["sprBg0","sprBg1"],s=t[Phaser.Math.Between(0,t.length-1)],i=new n(this,s,10*e);this.backgrounds.push(i)}}update(){for(var e=0;e<this.backgrounds.length;e++)this.backgrounds[e].update()}}const L=O;var W={type:Phaser.AUTO,width:480,height:640,backgroundColor:"black",physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},scene:[D,H,L],pixelArt:!0,roundPixels:!0};new Phaser.Game(W)})();